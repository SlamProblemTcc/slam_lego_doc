\chapter[Técnicas de Localização]{Técnicas de Localização}
\label{sec:tecnicas_localizacao}

Este capítulo tem como objetivo principal apresentar algumas técnicas simples de auto-localização, que podem ser utilizadas na resolução de problemas complexos, como o problema de SLAM, e também como uma fonte de estudo e aprendizado, a partir do conceito de Robótica Educacional. Desse modo, após a apresentação de cada técnica, serão levantadas possibilidades de ensino de disciplinas como matemática, física e programação, com a utilização da técnica.

A aplicação prática de cada técnica, assim como a análise dos resultados obtidos com a mesma estão descritos no capítulo \ref{sec:cenarios_teste}. 

\section{Técnica 1 - Verificação de Perpendicularidade} % (fold)
\label{sec:tecnica1}

	Esta técnica tem como objetivo garantir a perpendicularidade entre o robô e a parede. Esta necessidade surge a partir da presença de erros de navegação e, principalmente, erros durante a realização de rotações.

	Sabe-se que, para que o robô seja capaz de se localizar enquanto navega, o mesmo deve processar as informações de navegação a todo instante, geralmente utilizando sensores odométricos para isto. Porém, a utilização de odometria envolve a adição de diversos erros, tanto do próprio sensor odométrico quanto de derrapagens entre a roda e o chão. Desse modo, vê-se a necessidade da utilização de técnicas que possam minimizar a margem de erro presente na contagem odométrica, como a técnica de verificação de perpendicularidade.

	Ao realizar uma rotação, o robô se desloca \textit{x} graus para a direita ou esquerda, fazendo com que os sensores odométricos presentes nas duas rodas registrem a quantidade de rotações de cada motor. Com esta informação, o robô é capaz de atualizar a sua direção em relação a determinado ponto de referência (norte, sul ou até em relação a uma simples parede, por exemplo). Porém, de acordo com o que já foi apresentado, esta informação que está sendo processada possui um acúmulo de erros, minimizando sua precisão e aumentando a possibilidade de que o robô se perca.

	Neste contexto, se aplica a técnica de verificação de perpendicularidade, a qual pode atualizar a direção atual do robô, caso a mesma esteja incorreta. Esta verificação é feita quando o robô se encontra próximo a uma parede e \textit{'sabe'} a direção atual em relação a mesma. Neste contexto, a técnica de verificação de perpendicularidade encontra a direção que gera um angulo perpendicular entre o robô e a parede, comparando-a com a direção obtida pelo processamento das informações odométricas do robô.

	A Figura \ref{img:compararDirecoes} apresenta de forma clara a comparação entre as direções em relação ao mesmo ponto de referência (parede). Após a comparação, é feito um ajuste na direção registrada, utilizando a direção verificada com a técnica. Para que isto seja possível, basta garantir que a técnica de verificação de perpendicularidade funcione (pelo menos na teoria), o que é feito a seguir.

	A Figura \ref{img:perpendicularidade} representa a lógica presente nesta técnica, onde o robô compara as distâncias obtidas enquanto rotaciona no próprio eixo. Ao verificar que a distância está aumentando, o robô rotaciona para o sentido oposto até que a distância volte a aumentar. Assim é possível obter a menor distância, podendo afirmar que o robô está perpendicular à parede.

	Na seção \ref{sec:perpendicularidade_aplicacao} estão descritas algumas aplicações desta técnica em um contexto de Robótica Educacional, com o objetivo de possibilitar o ensino de disciplinas como matemática, física e programação.

	\subsection{Aplicação na Robótica Educacional - Técnica 1} % (fold)
	\label{sub:aplicação_na_robótica_educacional_técnica_1}
	
		Nesta seção estão apresentadas algumas formas de aplicação ta técnica de verificação de perpendicularidade em um contexto de Robótica Educacional. São analisados durante esta aplicação os conteúdos de \textit{Programação - Estruturas de condição e repetição} \ref{sec:tec1_prog} e de \textit{Matemática - Geometria básica} \ref{sec:tec1_mat}.

		A aplicação da técnica será feita a partir da definição de um problema que deverá ser solucionado pelo aluno. Os problemas podem possuir níveis diferentes de acordo com os alunos que o solucionarão, desse modo, cada problema possui a definição de seu nível e os pré-requisitos necessários para solucionar o mesmo.

		\subsubsection{Matemática}
		\label{sec:tec1_mat}
		
		\subsubsection{Programação}
		\label{sec:tec1_prog}

			Utilizando como contexto a técnica de verificação de perpendicularidade, é possível aplicar conhecimentos em programação relacionados a laços de repedição e estruturas condicionais, basicamente, podendo ser aplicado para alunos de conhecimento básico em programação. Abaixo estão descritos alguns problemas relacionados a técnica de verificação de perpendicularidade.

			\begin{enumerate}
				\item \textbf{Nível 1} - \textit{Dado um ponto de referência posicionado à frente do seu robô, deslocado x graus em relação a linha de perpendicularidade, faça uma função encontre a linha de perpendicularidade, deixando o robô perpendicular à parede.} \textbf{Pre-req.:}Funções, estruturas de repetição e de condição.

				Resposta:


				\item \textbf{Nível 3} - \textit{Dado um ponto de referência posicionado à frente do seu robô, deslocado x graus em relação a linha de perpendicularidade, faça uma função que descubra o valor de X.} \textbf{Pre-req.:} Funções, estruturas de repetição e de condição.

				Resposta:

				\item \textbf{Nível 5} - \textit{Dado um ponto de referência posicionado à frente do robô, imaginando que o robô deve andar em linha reta em direção ao ponto de referência, faça uma função que retorne um valor booleano informando se a posição futura do robô terá uma direção perpendicular ao ponto de referência ou não. Como input, a função deve esperar o par de pontos (x,y) iniciais e finais, assim como um caractere 'x' ou 'y', representando o eixo que pode representar a parede (ponto de referência).} \textbf{Pre-req.:} Funções, estruturas de repetição e de condição.

				Resposta:

			\end{enumerate} 
		
	% subsection aplicação_na_robótica_educacional_técnica_1 (end)
% section section_name (end)

\section{Técnica 2 - Navegação paralela à parede} % (fold)
\label{sec:técnica_2_navegação_paralela_à_parede}
	
	Este cenário de teste tem o objetivo de garantir a navegação paralela à paredes, a qual pode ocorrer diversas vezes durante uma navegação no ambiente. Com o objetivo de possibilitar de maneira a realização desta técnica de maneira eficiente, será utilizado o terceiro motor do kit para controlar a direção do sensor de distância, viabilizando a navegação em linha reta.

	Esta viabilização é feita a partir da comparação das distâncias obtidas durante a navegação. O percurso ideal terá sempre a mesma medida obtida, já que o mesmo estará navegando paralelamente à parede. Caso a distância se altere, o robô identifica a mudança e corrige sua direção retornando ao valor correto. A Figura \ref{img:paralelamente} apresenta de maneira clara o funcionamento desta técnica.
% section técnica_2_navegação_paralela_à_parede (end)

\section{Técnica 3 - Correção de erros de rotação} % (fold)
\label{sec:técnica_3_correção_de_erros_de_rotação}
	
	Este cenário de teste tem como objetivo verificar a implementação de uma técnica de correção de erros em rotações. Para isso, o robô precisa se encontrar próximo a uma parede. Utilizando a técnica \ref{sec:tecnica1} para encontrar a posição perpendicular à parede, registrando a distância encontrada na posição perpendicular. Após este registro, o robô realiza uma rotação completa, de 360º e uma nova verificação da distância. A partir da diferente entre as distâncias, o robô corrige o erro obtido nas rotações. 

	Esta correção pode ser feita utilizando a variável \textit{fixErrorCount}, a qual é utilizada para ponderar seu valor na angulação de rotação desejada.
% section técnica_3_correção_de_erros_de_rotação (end)

\section{Técnica 4 - Direcionamento por bússola} % (fold)
\label{sec:técnica_4_direcionamento_por_bússola}
	
	Este cenário de teste tem como objetivo verificar as vantagens da utilização de uma bússola como fonte de informações sobre o direcionamento do robô. Após esta verificação espera-se obter uma comparação entre os resultados obtidos com e sem a utilização de uma bússola, já que os erros também se encontram na mesma.
% section técnica_4_direcionamento_por_bússola (end)